{"ast":null,"code":"var queryString = require(\"query-string\");\n\nrequest = require(\"./request\"), helpers = require(\"./helpers\");\nmodule.exports = {\n  getAccessToken: data => {\n    return new Promise((resolve, reject) => {\n      if (!data || !data.client_secret) {\n        resolve(helpers.generatePayload(400, \"bad_request\", \"You must specify a client secret.\", null));\n      } else if (!data.redirect_uri) {\n        resolve(helpers.generatePayload(400, \"bad_request\", \"You must specify a redirect URI.\", null));\n      } else if (!data.code) {\n        resolve(helpers.generatePayload(400, \"bad_request\", \"You must specify an authorization code.\", null));\n      } else {\n        queries = queryString.stringify({\n          client_id: data.client_id,\n          client_secret: data.client_secret,\n          redirect_uri: data.redirect_uri,\n          code: data.code,\n          state: data.state,\n          grant_type: \"authorization_code\"\n        });\n        request.postLegacy(\"https://api.twitch.tv/kraken/oauth2/token?\" + queries, {}).then(function (data) {\n          resolve(helpers.generatePayload(200, \"success\", \"OK\", data));\n        });\n      }\n    });\n  },\n  checkToken: data => {\n    return new Promise((resolve, reject) => {\n      if (!data || !data.token) {\n        resolve(helpers.generatePayload(400, \"bad_request\", \"You must specify an authorization token.\", null));\n      } else {\n        request.getLegacy(\"https://api.twitch.tv/kraken\", {\n          token: data.token\n        }).then(function (data) {\n          resolve(helpers.generatePayload(200, \"success\", \"OK\", data));\n        });\n      }\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"script"}